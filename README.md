## Домашнее задание по теме "Введение в SQL. Установка ПО"
База данных: *world-db*
### Основная часть:

- создать новое соединение в *DBeaver* 
- подключить облачную базу данных *world-db* (реквизиты те же, что и у *dvd-rental* из инструкции, 
только название базы данных *world-db*)
- в качестве результата прислать **2** скриншота: диаграмму ER и результат запроса ```select * from country;```

### Дополнительная часть:

Выполнить основную часть используя контейнер Docker.
Для этого нужно использовать датасет  
*ghusta/postgres-world-db*  
database : *world-db*  
user : *world*  
password : *world123*  



## Домашнее задание по теме "Работа с базами данных"
База данных: *dvd-rental*
### Основная часть:

- перечислить все таблицы и первичные ключи в базе данных. Формат решения в виде таблицы:  
 | Название таблицы | Первичный ключ |  
- вывести всех **неактивных** покупателей  
- вывести все фильмы, **выпущенные** в 2006 году  
- вывести 10 последних **платежей** за прокат фильмов. 
Самостоятельно прочитать про limit и offset в postgresql (например тут - 
http://www.postgresqltutorial.com/postgresql-limit/)

### Дополнительная часть:

- вывести первичные ключи через запрос. Для написания простого запроса можете воспользоваться 
[*information_schema.table_constraints*](https://postgrespro.ru/docs/postgresql/9.4/infoschema-table-constraints)
- расширить запрос с первичными ключами, добавив информацию по типу данных 
[*information_schema.columns*](https://postgrespro.ru/docs/postgresql/9.4/infoschema-columns) 



## Домашнее задание по теме "Основы SQL"
База данных: *dvd-rental*
### Основная часть:

- выведите магазины, имеющие больше **300-от** покупателей  
- выведите у каждого покупателя **город** в котором он живет

### Дополнительная часть:

- выведите **ФИО сотрудников** и **города** магазинов, имеющих больше **300-от** покупателей  
- выведите **количество актеров**, снимавшихся в фильмах, которые сдаются в аренду за **2,99**



## Домашнее задание по теме "Углубление в SQL"
База данных: если подключение к облачной базе, то создаете новые таблицы в формате: *таблица_фамилия*, если 
подключение к контейнеру или локальному серверу, то создаете новую схему и в ней создаете таблицы.  
### Основная часть:

Спроектируйте базу данных для следующих сущностей:  
- язык (в смысле английский, французский и тп)  
- народность (в смысле славяне, англосаксы и тп)  
- страны (в смысле Россия, Германия и тп)

Правила следующие:
- на одном языке может говорить несколько народностей
- одна народность может входить в несколько стран
- каждая страна может состоять из нескольких народностей

Суть задания - научиться проектировать архитектуру и работать с **ограничениями**.
Таким образом должно получиться **5 таблиц**. Три таблицы-справочника и две таблицы со связями.  
(Пример таблицы со связями - *film_actor*)

Пришлите скрипты **создания таблиц** и **скрипты по добавлению** в каждую таблицу по **5** строк с данными

### Дополнительная часть:

- показать, как назначать внешние ключи краткой записью при создании таблицы и как можно присвоить 
внешние ключи для столбцов существующей таблицы
- масштабировать получившуюся базу данных используя следующие типы данных: *timestamp*, *boolean* и *text[]* 



## Домашнее задание по теме "Работа с PostgreSQL"
База данных: *dvd-rental*  
### Основная часть:

- сделайте запрос к таблице *rental*. Используя **оконую функцию** добавьте колонку с порядковым номером
аренды для **каждого** пользователя (сортировать по *rental_date*)
- для каждого пользователя подсчитайте **сколько** он брал в аренду фильмов со
специальным атрибутом *Behind the Scenes* 
    - напишите этот запрос 
    - создайте материализованное представление с этим запросом
    - обновите материализованное представление
- напишите **три** варианта условия для поиска *Behind the Scenes*

### Дополнительная часть:

- открыть по ссылке sql запрос [https://letsdocode.ru/sql-hw5.sql], сделать *explain analyze* запроса 
    - основываясь на описании запроса, найдите узкие места и опишите их
    - сравните с Вашим запросом из **основной части** (если Ваш запрос изначально укладывается в 15мс - отлично!)
    - оптимизируйте запрос, сократив время обработки до максимум **15мс** 
- сделайте **построчное** описание *explain analyze* на русском языке оптимизированного запроса. Описание строк 
в *explain* можно посмотреть тут - [https://use-the-index-luke.com/sql/explain-plan/postgresql/operations]



## Домашнее задание по теме "NoSQL & MongoDB"
База данных: создается в терминале  
### Основная часть:

Ссылка на терминал для работы с *MongoDB* [https://docs.mongodb.com/manual/tutorial/getting-started/]  
- создать свою базу данных
- создать коллекцию пользователей
- добавить информацию по **2-м** людям с полями *фамилия*, *имя* и *контактная информация* (как вложенный объект
[https://docs.mongodb.com/manual/core/document/#embedded-documents])

### Дополнительная часть:

- вывести **количество контактов** у каждого пользователя, ссылки на документацию:
    - https://docs.mongodb.com/manual/reference/operator/aggregation/
    - https://docs.mongodb.com/manual/reference/operator/aggregation/size/
    - https://docs.mongodb.com/manual/reference/operator/aggregation/objectToArray/
    - https://docs.mongodb.com/manual/reference/operator/aggregation/project/
    - https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/
    